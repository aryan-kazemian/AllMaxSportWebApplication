/*! For license information please see 856.3b17ec9d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkallmaxsport=self.webpackChunkallmaxsport||[]).push([[676,712,856],{1360:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2054:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2382:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2580:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},3712:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var l=s(5043),a=s(5692);const r=(0,s(7784).A)("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);var i=s(5746),n=s(7583),c=s(3853),o=s(6662),d=s(6676),x=s(579);function u(){const{ticketId:e}=(0,o.g)(),[t,s]=(0,l.useState)(null),[u,m]=(0,l.useState)([]),[p,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(!0),j=(0,l.useRef)(null),b=(0,l.useRef)(null),y="localhost"===window.location.hostname?"http://127.0.0.1:8000/api/tickets/":"https://allmaxsport.com/api/tickets/";(0,l.useEffect)((()=>{f(!0),async function(){try{const t=await fetch(`${y}?id=${e}`),l=await t.json();s(l[0]),m(l[0].messages)}catch(t){console.log(t.message)}finally{f(!1)}}()}),[e]),(0,l.useEffect)((()=>{(()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[u]);const v=async()=>{if(!p.trim())return;const e={id:(null===u||void 0===u?void 0:u.length)+1,ticket:t.id,text:p,sender:"customer",message:p,timestamp:(new Date).toISOString(),isUser:!1};m((t=>[...t,e])),h("");try{await fetch(`${y}?id=${t.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(s){console.error("Failed to send message:",s)}};return g?(0,x.jsx)(d.default,{size:40,color:"text-blue-500",center:!0,dir:"row",className:"text-white",children:"\u062f\u0631\u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc"}):(0,x.jsxs)("div",{className:"bg-zinc-900 rounded-lg overflow-hidden",children:[(0,x.jsxs)("div",{className:"p-4 bg-zinc-800 border-b border-zinc-700",children:[(0,x.jsx)("div",{className:"flex items-center mb-4",children:(0,x.jsx)(o.N_,{to:"/dashboard/tickets",children:(0,x.jsxs)("button",{className:"text-gray-400 hover:text-white flex items-center mr-2",children:[(0,x.jsx)(a.A,{size:20}),(0,x.jsx)("span",{className:"mr-1",children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]})})}),(0,x.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl text-gray-200 font-semibold mb-1",children:t.subject}),(0,x.jsxs)("p",{className:"text-sm text-gray-400",children:["\u0634\u0646\u0627\u0633\u0647 \u062a\u06cc\u06a9\u062a: #",t.id," | \u062a\u0627\u0631\u06cc\u062e \u0627\u06cc\u062c\u0627\u062f: ",t.date," | \u0627\u0631\u0633\u0627\u0644 \u06a9\u0646\u0646\u062f\u0647: ",t.customer_name]})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[(0,x.jsx)(n.A,{status:null===t||void 0===t?void 0:t.status}),(0,x.jsx)(c.A,{priority:null===t||void 0===t?void 0:t.priority}),(0,x.jsxs)("select",{className:"bg-zinc-700 border border-zinc-600 rounded-md text-gray-300 text-xs px-2 py-1",value:t.status,onChange:e=>{(async(e,t)=>{s((e=>({...e,status:t}))),fetch(`${y}?id=${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}).catch((e=>console.error("Failed to update ticket:",e)))})(t.id,e.target.value)},children:[(0,x.jsx)("option",{className:"text-gray-300",value:"",disabled:!0,children:"\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"}),(0,x.jsx)("option",{value:"open",children:"\u0628\u0627\u0632"}),(0,x.jsx)("option",{value:"pending",children:"\u062f\u0631\u062d\u0627\u0644 \u0628\u0631\u0631\u0633\u06cc"}),(0,x.jsx)("option",{value:"closed",children:"\u0628\u0633\u062a\u0647 \u0634\u062f\u0647"})]})]})]})]}),(0,x.jsxs)("div",{ref:b,className:"p-4 h-96 overflow-y-auto bg-zinc-900 flex flex-col",children:[u.map((e=>{var t;const s="customer"===e.sender,l=s?"\u0634\u0645\u0627":"\u0645\u062f\u06cc\u0631",a=new Date(null===e||void 0===e?void 0:e.timestamp).toLocaleDateString("fa-IR");return(0,x.jsx)("div",{className:"mb-4 flex "+(s?"justify-end":"justify-start"),children:(0,x.jsxs)("div",{className:"relative max-w-md p-4 rounded-xl shadow-md "+(s?"bg-blue-600 text-white rounded-br-none":"bg-zinc-700 text-gray-100 rounded-bl-none"),children:[(0,x.jsxs)("div",{className:"flex justify-between gap-4 items-center mb-2 text-xs opacity-80",children:[(0,x.jsx)("span",{className:"font-semibold",children:l}),(0,x.jsx)("span",{className:"text-[11px]",children:a})]}),(0,x.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.message}),(null===(t=e.attachments)||void 0===t?void 0:t.length)>0&&(0,x.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.attachments.map(((e,t)=>(0,x.jsxs)("div",{className:"bg-zinc-600 text-xs rounded px-2 py-1 flex items-center",children:[(0,x.jsx)(r,{size:12,className:"inline-block mr-1"}),e.file_name]},t)))})]})},e.id)})),(0,x.jsx)("div",{ref:j})]}),(0,x.jsx)("div",{className:"p-4 bg-zinc-800 border-t border-zinc-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsx)("textarea",{value:p,onChange:e=>{h(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},className:"w-full bg-zinc-700 border border-zinc-600 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-24 resize-none text-gray-300 placeholder:text-gray-400",placeholder:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f..."})}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)("button",{className:"bg-zinc-700 hover:bg-zinc-600 p-2 rounded-lg text-gray-300",title:"\u067e\u06cc\u0648\u0633\u062a \u0641\u0627\u06cc\u0644",children:(0,x.jsx)(r,{size:20})}),(0,x.jsx)("button",{onClick:v,disabled:!p.trim(),className:"p-2 rounded-lg "+(p.trim()?"bg-purple-700 hover:bg-purple-600 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),title:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",children:(0,x.jsx)(i.A,{size:20})})]})]})})]})}},3853:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(579);function a(e){var t,s;let{priority:a}=e;const r={high:{color:"bg-red-900 text-red-200",label:"\u0641\u0648\u0631\u06cc"},medium:{color:"bg-amber-800 text-amber-200",label:"\u0645\u062a\u0648\u0633\u0637"},low:{color:"bg-gray-700 text-gray-200",label:"\u0639\u0627\u062f\u06cc"}};return(0,l.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${null===(t=r[a])||void 0===t?void 0:t.color}`,children:null===(s=r[a])||void 0===s?void 0:s.label})}},3856:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var l=s(5043),a=s(7784);const r=(0,a.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var i=s(1360),n=s(579);function c(e){let{onNewTicket:t}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("h1",{className:"text-lg lg:text-2xl font-bold flex items-center gap-2",children:[(0,n.jsx)(r,{}),"\u062a\u06cc\u06a9\u062a \u0647\u0627\u06cc \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc"]}),(0,n.jsxs)("button",{onClick:t,className:"flex items-center gap-2 bg-purple-700 hover:bg-purple-600 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,n.jsx)(i.A,{size:18}),"\u062a\u06cc\u06a9\u062a \u062c\u062f\u06cc\u062f"]})]})}var o=s(9292),d=s(2580);function x(e){let{searchTerm:t,setSearchTerm:s,statusFilter:l,setStatusFilter:a}=e;return(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"relative flex-1",children:[(0,n.jsx)(o.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,n.jsx)("input",{type:"text",placeholder:"\u062c\u0633\u062a\u062c\u0648\u06cc \u062a\u06cc\u06a9\u062a \u0647\u0627...",value:t,onChange:e=>s(e.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg pr-10 pl-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{size:18,className:"text-gray-400"}),(0,n.jsxs)("select",{value:l,onChange:e=>a(e.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,n.jsx)("option",{value:"all",children:"\u0647\u0645\u0647 \u0648\u0636\u0639\u06cc\u062a \u0647\u0627"}),(0,n.jsx)("option",{value:"open",children:"\u0628\u0627\u0632"}),(0,n.jsx)("option",{value:"pending",children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0631\u0631\u0633\u06cc"}),(0,n.jsx)("option",{value:"closed",children:"\u0628\u0633\u062a\u0647 \u0634\u062f\u0647"})]})]})]})}var u=s(2382);const m=(0,a.A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var p=s(7583),h=s(3853);function g(e){let{tickets:t,onOpenTicket:s}=e;const[a,i]=(0,l.useState)("undefined"!==typeof window?window.innerWidth:0);(0,l.useEffect)((()=>{const e=()=>{i(window.innerWidth)};if("undefined"!==typeof window)return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const c=a<768,[o,d]=(0,l.useState)(null),x=e=>{var t;let{ticket:l}=e;return(0,n.jsx)("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg mb-3 overflow-hidden",onClick:()=>s(l.id),children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsx)("h3",{className:"text-sm font-medium flex-1",children:l.subject}),(0,n.jsx)("button",{onClick:e=>((e,t)=>{t.stopPropagation(),d(o===e?null:e)})(l.id,e),className:"text-gray-400 p-1 rounded-full hover:bg-gray-700 transition-colors ml-2",children:(0,n.jsx)(u.A,{size:18,className:"transform transition-transform "+(o===l.id?"rotate-180":"")})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)(p.A,{status:l.status}),(0,n.jsx)(h.A,{priority:l.priority})]}),(0,n.jsx)("div",{className:"text-xs text-gray-400",children:new Date(l.updated_at).toLocaleDateString("fa-IR")}),o===l.id&&(0,n.jsxs)("div",{className:"mt-3 pt-3 border-t border-zinc-700",children:[(0,n.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:l.message}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1 text-xs",children:[(0,n.jsx)(r,{size:14}),null===l||void 0===l||null===(t=l.messages)||void 0===t?void 0:t.length," \u067e\u0627\u0633\u062e"]}),(0,n.jsx)("button",{className:"text-gray-400 hover:text-gray-300 p-1",onClick:e=>{e.stopPropagation()},children:(0,n.jsx)(m,{size:16})})]})]})]})})},g=()=>(0,n.jsx)("div",{className:"rounded-lg overflow-hidden border border-gray-700",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-zinc-700",children:[(0,n.jsx)("thead",{className:"bg-zinc-800",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"\u062a\u06cc\u06a9\u062a"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"\u0648\u0636\u0639\u06cc\u062a"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"\u0627\u0648\u0644\u0648\u06cc\u062a"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"\u062a\u0627\u0631\u06cc\u062e"}),(0,n.jsx)("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"\u067e\u0627\u0633\u062e\u200c\u0647\u0627"}),(0,n.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:(0,n.jsx)("span",{className:"sr-only",children:"\u0639\u0645\u0644\u06cc\u0627\u062a"})})]})}),(0,n.jsx)("tbody",{className:"bg-zinc-800 divide-y divide-zinc-700",children:t.map((e=>{var t;return(0,n.jsxs)("tr",{className:"hover:bg-gray-750 cursor-pointer transition-colors",onClick:()=>s(e.id),children:[(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium",children:e.subject}),(0,n.jsx)("p",{className:"text-xs text-gray-400 truncate max-w-xs",children:e.message})]})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)(p.A,{status:e.status})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)(h.A,{priority:e.priority})}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm",children:new Date(e.updated_at).toLocaleDateString("fa-IR")}),(0,n.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(r,{size:14}),null===e||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.length]})}),(0,n.jsx)("td",{className:"px-6 py-4 text-left text-sm font-medium",children:(0,n.jsx)("button",{className:"text-gray-400 hover:text-gray-300 p-1 rounded hover:bg-gray-700",onClick:e=>{e.stopPropagation()},children:(0,n.jsx)(m,{size:18})})})]},e.id)}))})]})}),f=()=>(0,n.jsx)("div",{className:"text-center py-8 bg-zinc-800 rounded-lg border border-gray-700",children:(0,n.jsx)("p",{className:"text-gray-400",children:"\u0647\u06cc\u0686 \u062a\u06cc\u06a9\u062a\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f. \u0641\u06cc\u0644\u062a\u0631\u0647\u0627 \u0631\u0627 \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u06cc\u062f \u06cc\u0627 \u06cc\u06a9 \u062a\u06cc\u06a9\u062a \u062c\u062f\u06cc\u062f \u0627\u06cc\u062c\u0627\u062f \u06a9\u0646\u06cc\u062f."})});return(0,n.jsx)("div",{className:"w-full",dir:"rtl",children:t.length>0?c?(0,n.jsx)("div",{className:"space-y-3",children:t.map((e=>(0,n.jsx)(x,{ticket:e},e.id)))}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsx)(g,{})}):(0,n.jsx)(f,{})})}var f=s(3768);const j=()=>{const e=document.cookie.split(";");for(let t of e){const[e,s]=t.trim().split("=");if("userId"===e)return s}return null};function b(e){let{onSubmit:t,onCancel:s}=e;const[a,r]=(0,l.useState)({subject:"",message:"",priority:"medium",related_order_id:""}),[i,c]=(0,l.useState)(!1),[o,d]=(0,l.useState)(null),[x,u]=(0,l.useState)(null),m="localhost"===window.location.hostname?"http://127.0.0.1:8000/api/tickets/":"https://allmaxsport.com/api/tickets/",p="localhost"===window.location.hostname?"http://127.0.0.1:8000/api/user/":"https://allmaxsport.com/api/user/";(0,l.useEffect)((()=>{const e=j();(async()=>{try{const t=await fetch(`${p}?id=${e}`);if(!t.ok)return;let s=(await t.json())[0];u(s),f.Ay.success("data fetched successfully!")}catch(t){console.error("Error fetching user info:",t)}})()}),[]);return(0,n.jsxs)("div",{className:"bg-zinc-800 p-4 rounded-lg mb-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"\u0627\u06cc\u062c\u0627\u062f \u062a\u06cc\u06a9\u062a \u062c\u062f\u06cc\u062f"}),o&&(0,n.jsx)("div",{className:"bg-red-900/50 border border-red-700 p-3 rounded-md mb-4 text-red-100",children:o}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0645\u0648\u0636\u0648\u0639"}),(0,n.jsx)("input",{type:"text",value:a.subject,onChange:e=>r({...a,subject:e.target.value}),className:"w-full bg-zinc-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\u062a\u0648\u0636\u06cc\u062d \u0645\u062e\u062a\u0635\u0631 \u0645\u0634\u06a9\u0644",disabled:i})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0634\u0645\u0627\u0631\u0647\u200c\u06cc \u0633\u0641\u0627\u0631\u0634"}),(0,n.jsx)("input",{type:"text",value:a.related_order_id,onChange:e=>r({...a,related_order_id:e.target.value}),className:"w-full bg-zinc-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"\u0645\u062b\u0627\u0644: ORD12345",disabled:i})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u067e\u06cc\u0627\u0645"}),(0,n.jsx)("textarea",{value:a.message,onChange:e=>r({...a,message:e.target.value}),className:"w-full bg-zinc-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-32",placeholder:"\u062a\u0648\u0636\u06cc\u062d \u06a9\u0627\u0645\u0644 \u0645\u0634\u06a9\u0644 \u062e\u0648\u062f",disabled:i})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:"\u0627\u0648\u0644\u0648\u06cc\u062a"}),(0,n.jsxs)("select",{value:a.priority,onChange:e=>r({...a,priority:e.target.value}),className:"w-full bg-zinc-700 border border-gray-600 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:i,children:[(0,n.jsx)("option",{value:"low",children:"\u0639\u0627\u062f\u06cc"}),(0,n.jsx)("option",{value:"medium",children:"\u0645\u062a\u0648\u0633\u0637"}),(0,n.jsx)("option",{value:"high",children:"\u0641\u0648\u0631\u06cc"})]})]}),(0,n.jsx)("div",{className:"flex-1 flex items-end",children:(0,n.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,n.jsx)("button",{onClick:s,className:"flex-1 bg-zinc-700 hover:bg-gray-600 px-4 py-2 rounded-lg transition-colors disabled:opacity-50",disabled:i,children:"\u0627\u0646\u0635\u0631\u0627\u0641"}),(0,n.jsx)("button",{onClick:async()=>{if(!a.subject||!a.message)return void d("\u0644\u0637\u0641\u0627 \u0645\u0648\u0636\u0648\u0639 \u0648 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f");const e=j();if(e)try{c(!0),d(null);const s=x?`${x.first_name} ${x.last_name}`:"\u06a9\u0627\u0631\u0628\u0631 \u0646\u0627\u0634\u0646\u0627\u0633",l=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:a.subject,priority:a.priority,status:"open",customer:e,customer_name:s,related_order_id:a.related_order_id||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})});if(!l.ok)throw new Error(`\u062e\u0637\u0627 \u062f\u0631 \u0627\u06cc\u062c\u0627\u062f \u062a\u06cc\u06a9\u062a: ${l.status}`);const i=await l.json(),n=await fetch(`${m}?id=${i.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sender:"customer",text:i.subject,message:a.message,ticket:i.id,timestamp:(new Date).toISOString()})});if(!n.ok)throw new Error(`\u062e\u0637\u0627 \u062f\u0631 \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645: ${n.status}`);t(i),r({subject:"",message:"",priority:"medium",related_order_id:""})}catch(s){console.error("Error submitting ticket:",s),d(s.message||"\u062e\u0637\u0627 \u062f\u0631 \u0627\u0631\u0633\u0627\u0644 \u062a\u06cc\u06a9\u062a")}finally{c(!1)}else d("\u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627\u0641\u062a \u0646\u0634\u062f. \u0644\u0637\u0641\u0627 \u062f\u0648\u0628\u0627\u0631\u0647 \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f")},className:"flex-1 bg-purple-700 hover:bg-purple-600 px-4 py-2 rounded-lg transition-colors disabled:opacity-50",disabled:i,children:i?"\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644...":"\u062b\u0628\u062a \u062a\u06cc\u06a9\u062a"})]})})]})]})]})}var y=s(3712),v=s(6662);function N(){const[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)([]),[r,i]=(0,l.useState)(""),[o,d]=(0,l.useState)("all"),[u,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)(null),f=(0,v.Zp)();(0,l.useEffect)((()=>{const e="localhost"===window.location.hostname?"http://127.0.0.1:8000/api/tickets/":"https://allmaxsport.com/api/tickets/";!async function(){const s=await fetch(e),l=await s.json();t(l),a(l)}()}),[]),(0,l.useEffect)((()=>{let t=e;r&&(t=t.filter((e=>{var t,s;return(null===e||void 0===e||null===(t=e.subject)||void 0===t?void 0:t.includes(r))||(null===e||void 0===e||null===(s=e.message)||void 0===s?void 0:s.includes(r))}))),"all"!==o&&(t=t.filter((e=>(null===e||void 0===e?void 0:e.status)===o))),a(t)}),[r,o,e]);return null!==p?(0,n.jsx)("div",{className:"flex flex-col bg-gray-900 text-gray-100 rounded-lg shadow-lg p-6 max-w-6xl mx-auto",children:(0,n.jsx)(y.default,{})}):(0,n.jsxs)("div",{className:"flex flex-col bg-zinc-900 text-gray-100 rounded-lg shadow-lg p-6 max-w-6xl mx-auto",dir:"rtl",children:[(0,n.jsx)(c,{onNewTicket:()=>m(!u)}),u&&(0,n.jsx)(b,{onSubmit:s=>{const l={id:e.length+1,...s,status:"open",date:"1404/01/31",replies:0};t([l,...e]),m(!1)},onCancel:()=>m(!1)}),(0,n.jsx)(x,{searchTerm:r,setSearchTerm:i,statusFilter:o,setStatusFilter:d}),(0,n.jsx)(g,{tickets:s,onOpenTicket:function(e){f(`/dashboard/tickets/${Number(e)}`)}})]})}},5088:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5746:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},6676:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(5043);var l=s(4806),a=s(579);const r=e=>{let{size:t=40,color:s="text-blue-500",center:r=!1,dir:i="row",className:n="",textSize:c="",children:o}=e;const d=`rounded-full ${s} bg-current`;return(0,a.jsxs)("div",{className:`flex  items-center gap-3 ${r?"justify-center w-full h-full":""} ${n} ${"row"===i?"flex-row":"flex-col"}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:[0,1,2].map((e=>(0,a.jsx)(l.P.span,{className:d,style:{width:t/5,height:t/5},animate:{y:[0,-t/6,0],opacity:[.5,1,.5]},transition:{repeat:1/0,repeatDelay:.2,duration:.8,ease:"easeInOut",delay:.2*e}},e)))}),o&&(0,a.jsx)("div",{className:`${c||"text-sm"} text-muted-foreground text-center`,children:o})]})}},7583:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(7719),a=s(5088),r=s(2054),i=s(579);function n(e){let{status:t}=e;const s={open:{icon:(0,i.jsx)(l.A,{size:14}),color:"bg-amber-700 text-amber-200",label:"\u0628\u0627\u0632"},pending:{icon:(0,i.jsx)(a.A,{size:14}),color:"bg-gray-700 text-gray-200",label:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0631\u0631\u0633\u06cc"},closed:{icon:(0,i.jsx)(r.A,{size:14}),color:"bg-green-800 text-green-200",label:"\u0628\u0633\u062a\u0647 \u0634\u062f\u0647"}}[t]||{icon:(0,i.jsx)(l.A,{size:14}),color:"bg-red-700 text-white",label:"\u0646\u0627\u0645\u0634\u062e\u0635"};return(0,i.jsxs)("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[s.icon,s.label]})}},7719:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=856.3b17ec9d.chunk.js.map