/*! For license information please see 712.f747d49e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkallmaxsport=self.webpackChunkallmaxsport||[]).push([[676,712],{2054:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3712:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var l=s(5043),a=s(5692);const r=(0,s(7784).A)("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]]);var n=s(5746),i=s(7583),c=s(3853),o=s(6662),d=s(6676),x=s(579);function m(){const{ticketId:e}=(0,o.g)(),[t,s]=(0,l.useState)(null),[m,u]=(0,l.useState)([]),[p,h]=(0,l.useState)(""),[g,f]=(0,l.useState)(!0),b=(0,l.useRef)(null),y=(0,l.useRef)(null),j="localhost"===window.location.hostname?"http://127.0.0.1:8000/api/tickets/":"https://allmaxsport.com/api/tickets/";(0,l.useEffect)((()=>{f(!0),async function(){try{const t=await fetch(`${j}?id=${e}`),l=await t.json();s(l[0]),u(l[0].messages)}catch(t){console.log(t.message)}finally{f(!1)}}()}),[e]),(0,l.useEffect)((()=>{(()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[m]);const v=async()=>{if(!p.trim())return;const e={id:(null===m||void 0===m?void 0:m.length)+1,ticket:t.id,text:p,sender:"customer",message:p,timestamp:(new Date).toISOString(),isUser:!1};u((t=>[...t,e])),h("");try{await fetch(`${j}?id=${t.id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(s){console.error("Failed to send message:",s)}};return g?(0,x.jsx)(d.default,{size:40,color:"text-blue-500",center:!0,dir:"row",className:"text-white",children:"\u062f\u0631\u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc"}):(0,x.jsxs)("div",{className:"bg-zinc-900 rounded-lg overflow-hidden",children:[(0,x.jsxs)("div",{className:"p-4 bg-zinc-800 border-b border-zinc-700",children:[(0,x.jsx)("div",{className:"flex items-center mb-4",children:(0,x.jsx)(o.N_,{to:"/dashboard/tickets",children:(0,x.jsxs)("button",{className:"text-gray-400 hover:text-white flex items-center mr-2",children:[(0,x.jsx)(a.A,{size:20}),(0,x.jsx)("span",{className:"mr-1",children:"\u0628\u0627\u0632\u06af\u0634\u062a"})]})})}),(0,x.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl text-gray-200 font-semibold mb-1",children:t.subject}),(0,x.jsxs)("p",{className:"text-sm text-gray-400",children:["\u0634\u0646\u0627\u0633\u0647 \u062a\u06cc\u06a9\u062a: #",t.id," | \u062a\u0627\u0631\u06cc\u062e \u0627\u06cc\u062c\u0627\u062f: ",t.date," | \u0627\u0631\u0633\u0627\u0644 \u06a9\u0646\u0646\u062f\u0647: ",t.customer_name]})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:[(0,x.jsx)(i.A,{status:null===t||void 0===t?void 0:t.status}),(0,x.jsx)(c.A,{priority:null===t||void 0===t?void 0:t.priority}),(0,x.jsxs)("select",{className:"bg-zinc-700 border border-zinc-600 rounded-md text-gray-300 text-xs px-2 py-1",value:t.status,onChange:e=>{(async(e,t)=>{s((e=>({...e,status:t}))),fetch(`${j}?id=${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:t})}).catch((e=>console.error("Failed to update ticket:",e)))})(t.id,e.target.value)},children:[(0,x.jsx)("option",{className:"text-gray-300",value:"",disabled:!0,children:"\u062a\u063a\u06cc\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a"}),(0,x.jsx)("option",{value:"open",children:"\u0628\u0627\u0632"}),(0,x.jsx)("option",{value:"pending",children:"\u062f\u0631\u062d\u0627\u0644 \u0628\u0631\u0631\u0633\u06cc"}),(0,x.jsx)("option",{value:"closed",children:"\u0628\u0633\u062a\u0647 \u0634\u062f\u0647"})]})]})]})]}),(0,x.jsxs)("div",{ref:y,className:"p-4 h-96 overflow-y-auto bg-zinc-900 flex flex-col",children:[m.map((e=>{var t;const s="customer"===e.sender,l=s?"\u0634\u0645\u0627":"\u0645\u062f\u06cc\u0631",a=new Date(null===e||void 0===e?void 0:e.timestamp).toLocaleDateString("fa-IR");return(0,x.jsx)("div",{className:"mb-4 flex "+(s?"justify-end":"justify-start"),children:(0,x.jsxs)("div",{className:"relative max-w-md p-4 rounded-xl shadow-md "+(s?"bg-blue-600 text-white rounded-br-none":"bg-zinc-700 text-gray-100 rounded-bl-none"),children:[(0,x.jsxs)("div",{className:"flex justify-between gap-4 items-center mb-2 text-xs opacity-80",children:[(0,x.jsx)("span",{className:"font-semibold",children:l}),(0,x.jsx)("span",{className:"text-[11px]",children:a})]}),(0,x.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.message}),(null===(t=e.attachments)||void 0===t?void 0:t.length)>0&&(0,x.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.attachments.map(((e,t)=>(0,x.jsxs)("div",{className:"bg-zinc-600 text-xs rounded px-2 py-1 flex items-center",children:[(0,x.jsx)(r,{size:12,className:"inline-block mr-1"}),e.file_name]},t)))})]})},e.id)})),(0,x.jsx)("div",{ref:b})]}),(0,x.jsx)("div",{className:"p-4 bg-zinc-800 border-t border-zinc-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsx)("textarea",{value:p,onChange:e=>{h(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},className:"w-full bg-zinc-700 border border-zinc-600 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-24 resize-none text-gray-300 placeholder:text-gray-400",placeholder:"\u067e\u06cc\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f..."})}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsx)("button",{className:"bg-zinc-700 hover:bg-zinc-600 p-2 rounded-lg text-gray-300",title:"\u067e\u06cc\u0648\u0633\u062a \u0641\u0627\u06cc\u0644",children:(0,x.jsx)(r,{size:20})}),(0,x.jsx)("button",{onClick:v,disabled:!p.trim(),className:"p-2 rounded-lg "+(p.trim()?"bg-purple-700 hover:bg-purple-600 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"),title:"\u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645",children:(0,x.jsx)(n.A,{size:20})})]})]})})]})}},3853:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(579);function a(e){var t,s;let{priority:a}=e;const r={high:{color:"bg-red-900 text-red-200",label:"\u0641\u0648\u0631\u06cc"},medium:{color:"bg-amber-800 text-amber-200",label:"\u0645\u062a\u0648\u0633\u0637"},low:{color:"bg-gray-700 text-gray-200",label:"\u0639\u0627\u062f\u06cc"}};return(0,l.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${null===(t=r[a])||void 0===t?void 0:t.color}`,children:null===(s=r[a])||void 0===s?void 0:s.label})}},5088:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5746:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},6676:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});s(5043);var l=s(4806),a=s(579);const r=e=>{let{size:t=40,color:s="text-blue-500",center:r=!1,dir:n="row",className:i="",textSize:c="",children:o}=e;const d=`rounded-full ${s} bg-current`;return(0,a.jsxs)("div",{className:`flex  items-center gap-3 ${r?"justify-center w-full h-full":""} ${i} ${"row"===n?"flex-row":"flex-col"}`,children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:[0,1,2].map((e=>(0,a.jsx)(l.P.span,{className:d,style:{width:t/5,height:t/5},animate:{y:[0,-t/6,0],opacity:[.5,1,.5]},transition:{repeat:1/0,repeatDelay:.2,duration:.8,ease:"easeInOut",delay:.2*e}},e)))}),o&&(0,a.jsx)("div",{className:`${c||"text-sm"} text-muted-foreground text-center`,children:o})]})}},7583:(e,t,s)=>{s.d(t,{A:()=>i});var l=s(7719),a=s(5088),r=s(2054),n=s(579);function i(e){let{status:t}=e;const s={open:{icon:(0,n.jsx)(l.A,{size:14}),color:"bg-amber-700 text-amber-200",label:"\u0628\u0627\u0632"},pending:{icon:(0,n.jsx)(a.A,{size:14}),color:"bg-gray-700 text-gray-200",label:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0631\u0631\u0633\u06cc"},closed:{icon:(0,n.jsx)(r.A,{size:14}),color:"bg-green-800 text-green-200",label:"\u0628\u0633\u062a\u0647 \u0634\u062f\u0647"}}[t]||{icon:(0,n.jsx)(l.A,{size:14}),color:"bg-red-700 text-white",label:"\u0646\u0627\u0645\u0634\u062e\u0635"};return(0,n.jsxs)("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[s.icon,s.label]})}},7719:(e,t,s)=>{s.d(t,{A:()=>l});const l=(0,s(7784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);
//# sourceMappingURL=712.f747d49e.chunk.js.map