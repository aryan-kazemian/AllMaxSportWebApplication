{"version":3,"file":"static/js/712.f747d49e.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/circle-check-big.ts","../node_modules/lucide-react/src/icons/paperclip.ts","Component/ComponentChilds/Dashboard/user/tickets/TicketDetailView.jsx","Component/ComponentChilds/Dashboard/user/tickets/PriorityBadge.jsx","../node_modules/lucide-react/src/icons/clock.ts","../node_modules/lucide-react/src/icons/send.ts","Component/ComponentChilds/Loader.jsx","Component/ComponentChilds/Dashboard/user/tickets/StatusBadge.jsx","../node_modules/lucide-react/src/icons/triangle-alert.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M21.801 10A10 10 0 1 1 17 3.335', key: 'yps3ct' }],\n  ['path', { d: 'm9 11 3 3L22 4', key: '1pflzl' }],\n];\n\n/**\n * @component @name CircleCheckBig\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEuODAxIDEwQTEwIDEwIDAgMSAxIDE3IDMuMzM1IiAvPgogIDxwYXRoIGQ9Im05IDExIDMgM0wyMiA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/circle-check-big\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CircleCheckBig = createLucideIcon('circle-check-big', __iconNode);\n\nexport default CircleCheckBig;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M13.234 20.252 21 12.3', key: '1cbrk9' }],\n  [\n    'path',\n    {\n      d: 'm16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486',\n      key: '1pkts6',\n    },\n  ],\n];\n\n/**\n * @component @name Paperclip\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMuMjM0IDIwLjI1MiAyMSAxMi4zIiAvPgogIDxwYXRoIGQ9Im0xNiA2LTguNDE0IDguNTg2YTIgMiAwIDAgMCAwIDIuODI4IDIgMiAwIDAgMCAyLjgyOCAwbDguNDE0LTguNTg2YTQgNCAwIDAgMCAwLTUuNjU2IDQgNCAwIDAgMC01LjY1NiAwbC04LjQxNSA4LjU4NWE2IDYgMCAxIDAgOC40ODYgOC40ODYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/paperclip\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Paperclip = createLucideIcon('paperclip', __iconNode);\n\nexport default Paperclip;\n","// TicketDetailView.jsx - Updated with auto-scrolling functionality\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { ArrowRight, Send, Paperclip } from \"lucide-react\";\r\nimport StatusBadge from \"./StatusBadge\";\r\nimport PriorityBadge from \"./PriorityBadge\";\r\nimport { useParams, Link } from \"react-router-dom\";\r\nimport Loader from \"../../../Loader\";\r\n\r\nexport default function TicketDetailView() {\r\n  const { ticketId } = useParams();\r\n  const [ticket, setTicket] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Reference to the message container for scrolling\r\n  const messagesEndRef = useRef(null);\r\n  const messagesContainerRef = useRef(null);\r\n\r\n  // Scroll to bottom of messages\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  const API_URL =\r\n    window.location.hostname === \"localhost\"\r\n      ? \"http://127.0.0.1:8000/api/tickets/\"\r\n      : \"https://allmaxsport.com/api/tickets/\";\r\n\r\n  const updateTicketStatus = async (ticketId, newStatus) => {\r\n    setTicket((ticket) => ({\r\n      ...ticket,\r\n      status: newStatus,\r\n    }));\r\n\r\n    // Send PATCH request to API\r\n    fetch(`${API_URL}?id=${ticketId}`, {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ status: newStatus }),\r\n    }).catch((error) => console.error(\"Failed to update ticket:\", error));\r\n  };\r\n\r\n  // Fetch ticket details\r\n  useEffect(() => {\r\n    // Mock API call - replace with your actual API\r\n    setIsLoading(true);\r\n\r\n    async function loadTicketDetails() {\r\n      try {\r\n        const response = await fetch(`${API_URL}?id=${ticketId}`);\r\n        const data = await response.json();\r\n        setTicket(data[0]);\r\n        setMessages(data[0].messages);\r\n      } catch (e) {\r\n        console.log(e.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n\r\n    loadTicketDetails();\r\n  }, [ticketId]);\r\n\r\n  // Scroll to bottom when messages change or when component mounts\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Handle sending a new message\r\n  const handleSendMessage = async () => {\r\n    if (!newMessage.trim()) return;\r\n\r\n    const newMsg = {\r\n      id: messages?.length + 1,\r\n      ticket: ticket.id,\r\n      text: newMessage,\r\n      sender: \"customer\",\r\n      message: newMessage,\r\n      timestamp: new Date().toISOString(),\r\n      isUser: false,\r\n    };\r\n\r\n    // Local update\r\n    setMessages((prev) => [...prev, newMsg]);\r\n    setNewMessage(\"\");\r\n\r\n    try {\r\n      await fetch(`${API_URL}?id=${ticket.id}`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(newMsg),\r\n      });\r\n    } catch (e) {\r\n      console.error(\"Failed to send message:\", e);\r\n    }\r\n  };\r\n\r\n  // Handle keyboard shortcut for sending message\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Loader\r\n        size={40}\r\n        color=\"text-blue-500\"\r\n        center={true}\r\n        dir=\"row\"\r\n        className=\"text-white\"\r\n      >\r\n        درحال بارگذاری\r\n      </Loader>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-zinc-900 rounded-lg overflow-hidden\">\r\n      {/* Ticket Header */}\r\n      <div className=\"p-4 bg-zinc-800 border-b border-zinc-700\">\r\n        <div className=\"flex items-center mb-4\">\r\n          <Link to={\"/dashboard/tickets\"}>\r\n            <button className=\"text-gray-400 hover:text-white flex items-center mr-2\">\r\n              <ArrowRight size={20} />\r\n              <span className=\"mr-1\">بازگشت</span>\r\n            </button>\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between\">\r\n          <div>\r\n            <h2 className=\"text-xl text-gray-200 font-semibold mb-1\">\r\n              {ticket.subject}\r\n            </h2>\r\n            <p className=\"text-sm text-gray-400\">\r\n              شناسه تیکت: #{ticket.id} | تاریخ ایجاد: {ticket.date} | ارسال\r\n              کننده: {ticket.customer_name}\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex flex-wrap gap-2 mt-2 md:mt-0\">\r\n            <StatusBadge status={ticket?.status} />\r\n            <PriorityBadge priority={ticket?.priority} />\r\n\r\n            {/* Status Change Dropdown */}\r\n            <select\r\n              className=\"bg-zinc-700 border border-zinc-600 rounded-md text-gray-300 text-xs px-2 py-1\"\r\n              value={ticket.status}\r\n              onChange={(e) => {\r\n                updateTicketStatus(ticket.id, e.target.value);\r\n              }}\r\n            >\r\n              <option className=\"text-gray-300\" value=\"\" disabled>\r\n                تغییر وضعیت\r\n              </option>\r\n              <option value=\"open\">باز</option>\r\n              <option value=\"pending\">درحال بررسی</option>\r\n              <option value=\"closed\">بسته شده</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Message List */}\r\n      <div\r\n        ref={messagesContainerRef}\r\n        className=\"p-4 h-96 overflow-y-auto bg-zinc-900 flex flex-col\"\r\n      >\r\n        {messages.map((msg) => {\r\n          const isCustomer = msg.sender === \"customer\";\r\n          const formattedName = isCustomer ? \"شما\" : \"مدیر\";\r\n          const formattedDate = new Date(msg?.timestamp).toLocaleDateString(\r\n            \"fa-IR\"\r\n          );\r\n\r\n          return (\r\n            <div\r\n              key={msg.id}\r\n              className={`mb-4 flex ${\r\n                isCustomer ? \"justify-end\" : \"justify-start\"\r\n              }`}\r\n            >\r\n              <div\r\n                className={`relative max-w-md p-4 rounded-xl shadow-md ${\r\n                  isCustomer\r\n                    ? \"bg-blue-600 text-white rounded-br-none\"\r\n                    : \"bg-zinc-700 text-gray-100 rounded-bl-none\"\r\n                }`}\r\n              >\r\n                {/* Name & Timestamp (always in a row, spaced apart) */}\r\n                <div className=\"flex justify-between gap-4 items-center mb-2 text-xs opacity-80\">\r\n                  <span className=\"font-semibold\">{formattedName}</span>\r\n                  <span className=\"text-[11px]\">{formattedDate}</span>\r\n                </div>\r\n\r\n                {/* Message Text */}\r\n                <p className=\"text-sm whitespace-pre-wrap\">{msg.message}</p>\r\n\r\n                {/* Attachments if any */}\r\n                {msg.attachments?.length > 0 && (\r\n                  <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                    {msg.attachments.map((attachment, idx) => (\r\n                      <div\r\n                        key={idx}\r\n                        className=\"bg-zinc-600 text-xs rounded px-2 py-1 flex items-center\"\r\n                      >\r\n                        <Paperclip size={12} className=\"inline-block mr-1\" />\r\n                        {attachment.file_name}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {/* This empty div is used as a reference point to scroll to */}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Message Input */}\r\n      <div className=\"p-4 bg-zinc-800 border-t border-zinc-700\">\r\n        <div className=\"flex items-center justify-center gap-2\">\r\n          <div className=\"flex-1\">\r\n            <textarea\r\n              value={newMessage}\r\n              onChange={(e) => {\r\n                setNewMessage(e.target.value);\r\n              }}\r\n              // onFocus={() => markPendingIfNeeded(ticketId)} // Optional: only trigger on focus\r\n              onKeyDown={handleKeyDown}\r\n              className=\"w-full bg-zinc-700 border border-zinc-600 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500 min-h-24 resize-none text-gray-300 placeholder:text-gray-400\"\r\n              placeholder=\"پیام خود را بنویسید...\"\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-col gap-2\">\r\n            <button\r\n              className=\"bg-zinc-700 hover:bg-zinc-600 p-2 rounded-lg text-gray-300\"\r\n              title=\"پیوست فایل\"\r\n            >\r\n              <Paperclip size={20} />\r\n            </button>\r\n            <button\r\n              onClick={handleSendMessage}\r\n              disabled={!newMessage.trim()}\r\n              className={`p-2 rounded-lg ${\r\n                !newMessage.trim()\r\n                  ? \"bg-gray-700 text-gray-500 cursor-not-allowed\"\r\n                  : \"bg-purple-700 hover:bg-purple-600 text-white\"\r\n              }`}\r\n              title=\"ارسال پیام\"\r\n            >\r\n              <Send size={20} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// PriorityBadge.jsx\r\nexport default function PriorityBadge({ priority }) {\r\n  const priorityConfig = {\r\n    high: {\r\n      color: \"bg-red-900 text-red-200\",\r\n      label: \"فوری\",\r\n    },\r\n    medium: {\r\n      color: \"bg-amber-800 text-amber-200\",\r\n      label: \"متوسط\",\r\n    },\r\n    low: {\r\n      color: \"bg-gray-700 text-gray-200\",\r\n      label: \"عادی\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <span\r\n      className={`px-2 py-1 rounded-full text-xs font-medium ${priorityConfig[priority]?.color}`}\r\n    >\r\n      {priorityConfig[priority]?.label}\r\n    </span>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['polyline', { points: '12 6 12 12 16 14', key: '68esgv' }],\n];\n\n/**\n * @component @name Clock\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cG9seWxpbmUgcG9pbnRzPSIxMiA2IDEyIDEyIDE2IDE0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/clock\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Clock = createLucideIcon('clock', __iconNode);\n\nexport default Clock;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z',\n      key: '1ffxy3',\n    },\n  ],\n  ['path', { d: 'm21.854 2.147-10.94 10.939', key: '12cjpa' }],\n];\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNTM2IDIxLjY4NmEuNS41IDAgMCAwIC45MzctLjAyNGw2LjUtMTlhLjQ5Ni40OTYgMCAwIDAtLjYzNS0uNjM1bC0xOSA2LjVhLjUuNSAwIDAgMC0uMDI0LjkzN2w3LjkzIDMuMThhMiAyIDAgMCAxIDEuMTEyIDEuMTF6IiAvPgogIDxwYXRoIGQ9Im0yMS44NTQgMi4xNDctMTAuOTQgMTAuOTM5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('send', __iconNode);\n\nexport default Send;\n","import React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst Loader = ({\r\n  size = 40,\r\n  color = \"text-blue-500\",\r\n  center = false,\r\n  dir = \"row\",\r\n  className = \"\",\r\n  textSize = \"\",\r\n  children,\r\n}) => {\r\n  const dotCommon = `rounded-full ${color} bg-current`;\r\n\r\n  return (\r\n    <div\r\n      className={`flex  items-center gap-3 ${\r\n        center ? \"justify-center w-full h-full\" : \"\"\r\n      } ${className} ${dir === \"row\" ? \"flex-row\" : \"flex-col\"}`}\r\n    >\r\n      <div className=\"flex items-center gap-1\">\r\n        {[0, 1, 2].map((i) => (\r\n          <motion.span\r\n            key={i}\r\n            className={dotCommon}\r\n            style={{ width: size / 5, height: size / 5 }}\r\n            animate={{\r\n              y: [0, -size / 6, 0],\r\n              opacity: [0.5, 1, 0.5],\r\n            }}\r\n            transition={{\r\n              repeat: Infinity,\r\n              repeatDelay: 0.2,\r\n              duration: 0.8,\r\n              ease: \"easeInOut\",\r\n              delay: i * 0.2,\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {children && (\r\n        <div\r\n          className={`${\r\n            textSize ? textSize : \"text-sm\"\r\n          } text-muted-foreground text-center`}\r\n        >\r\n          {children}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import { AlertTriangle, Clock, CheckCircle } from \"lucide-react\";\r\n\r\nexport default function StatusBadge({ status }) {\r\n  const statusConfig = {\r\n    open: {\r\n      icon: <AlertTriangle size={14} />,\r\n      color: \"bg-amber-700 text-amber-200\",\r\n      label: \"باز\",\r\n    },\r\n    pending: {\r\n      icon: <Clock size={14} />,\r\n      color: \"bg-gray-700 text-gray-200\",\r\n      label: \"در حال بررسی\",\r\n    },\r\n    closed: {\r\n      icon: <CheckCircle size={14} />,\r\n      color: \"bg-green-800 text-green-200\",\r\n      label: \"بسته شده\",\r\n    },\r\n  };\r\n\r\n  // Fallback config for unknown status\r\n  const config = statusConfig[status] || {\r\n    icon: <AlertTriangle size={14} />,\r\n    color: \"bg-red-700 text-white\",\r\n    label: \"نامشخص\",\r\n  };\r\n\r\n  return (\r\n    <span\r\n      className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${config.color}`}\r\n    >\r\n      {config.icon}\r\n      {config.label}\r\n    </span>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3',\n      key: 'wmoenq',\n    },\n  ],\n  ['path', { d: 'M12 9v4', key: 'juzpu7' }],\n  ['path', { d: 'M12 17h.01', key: 'p32p05' }],\n];\n\n/**\n * @component @name TriangleAlert\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjEuNzMgMTgtOC0xNGEyIDIgMCAwIDAtMy40OCAwbC04IDE0QTIgMiAwIDAgMCA0IDIxaDE2YTIgMiAwIDAgMCAxLjczLTMiIC8+CiAgPHBhdGggZD0iTTEyIDl2NCIgLz4KICA8cGF0aCBkPSJNMTIgMTdoLjAxIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/triangle-alert\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TriangleAlert = createLucideIcon('triangle-alert', __iconNode);\n\nexport default TriangleAlert;\n"],"names":["CircleCheckBig","createLucideIcon","d","key","Paperclip","TicketDetailView","ticketId","useParams","ticket","setTicket","useState","messages","setMessages","newMessage","setNewMessage","isLoading","setIsLoading","messagesEndRef","useRef","messagesContainerRef","API_URL","window","location","hostname","useEffect","async","response","fetch","data","json","e","console","log","message","loadTicketDetails","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","newMsg","id","length","text","sender","timestamp","Date","toISOString","isUser","prev","method","headers","body","JSON","stringify","error","_jsx","Loader","size","color","center","dir","className","children","_jsxs","Link","to","ArrowRight","subject","date","customer_name","StatusBadge","status","PriorityBadge","priority","value","onChange","newStatus","catch","updateTicketStatus","target","disabled","ref","map","msg","_msg$attachments","isCustomer","formattedName","formattedDate","toLocaleDateString","attachments","attachment","idx","file_name","onKeyDown","shiftKey","preventDefault","placeholder","title","onClick","Send","_ref","_priorityConfig$prior","_priorityConfig$prior2","priorityConfig","high","label","medium","low","Clock","cx","cy","r","points","textSize","dotCommon","i","motion","span","style","width","height","animate","y","opacity","transition","repeat","Infinity","repeatDelay","duration","ease","delay","config","open","icon","AlertTriangle","pending","closed","CheckCircle","TriangleAlert"],"sourceRoot":""}